{% comment %} CSS code for widget {% endcomment %}
{{ 'widget.css' | asset_url | stylesheet_tag }}


{% comment %} Widget body start {% endcomment %}
{% if bundleId != blank %}
  <div id="neat-bundles-widget-container">

    <h1>This is heading h10</h1>

    <div x-data="bundle"></div>

  </div>
{% endif %}
{% comment %} Widget body end {% endcomment %}


{% comment %} Alpine.js import {% endcomment %}
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

{% comment %} JS code for widget {% endcomment %}
<script>
  const APP_URL = "https://sodium-snake-tommy-contributors.trycloudflare.com";

  document.addEventListener("alpine:init", () => {
    Alpine.data("bundle", () => ({
      init(){
        console.log(`${APP_URL}/api/bundleData?bundleId={{bundleId}}&storeUrl={{shop.permanent_domain}}`);
        fetch(`${APP_URL}/api/bundleData?bundleId={{bundleId}}&storeUrl={{shop.permanent_domain}}`)
            .then(response => response.json())
            .then(data => {
              this.bundleData = data;
            })
            .catch(error => console.log('error', error));
      },

      shopDomain: '{{ shop.permanent_domain }}',
      bundleId: '{{ bundleId }}',
      
        
    }));
  });
</script>